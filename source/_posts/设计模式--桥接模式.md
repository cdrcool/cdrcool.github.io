---
title: 设计模式--桥接模式
date: 2019-09-01 22:20:21
categories: 设计模式
tags:
	- 桥接模式
---
## 定义
**桥接模式**将抽象部分与它的实现部分分离，使它们都可以独立地变化。

## 角色
* 抽象类（Abstraction）
* 扩充抽象类（RefinedAbstraction）
* 实现类接口（Implementor）
* 具体实现类（ConcreteImplementor）

## 类图
![Bridge UML](/images/design-patterns/Bridge%20UML.png)

## 实现
```java
/**
 * 抽象类
 */
public abstract class Abstraction {
    /**
     * 持有实现类引用
     */
    protected Implementor impl;

    public void setImpl(Implementor impl) {
        this.impl = impl;
    }

    /**
     * 操作
     */
    public abstract void operation();
}

/**
 * 扩充抽象类
 */
public class RefinedAbstraction extends Abstraction {

    @Override
    public void operation() {
        impl.operationImpl();
    }
}

/**
 * 实现类接口
 */
public interface Implementor {
    
    /**
     * 实现类操作
     */
    void operationImpl();
}

/**
 * 具体实现类A
 */
public class ConcreteImplementorA implements Implementor {

    @Override
    public void operationImpl() {
        System.out.println("A operation");
    }
}

/**
 * 具体实现类B
 */
public class ConcreteImplementorB implements Implementor {

    @Override
    public void operationImpl() {
        System.out.println("B operation");
    }
}
```

## 模式分析
理解桥接模式，重点需要理解如何将抽象化（Abstraction）与实现化（Implementation）解耦，使得二者可以独立地变化。
* 抽象化：抽象化就是忽略一些信息，把不同的实体当作同样的实体对待。在面向对象中，将对象的共同性质抽取出来形成类的过程即为抽象化的过程。
* 实现化：针对抽象化给出的具体实现，就是实现化，抽象化与实现化是一对互逆的概念，实现化产生的对象比抽象化更具体，是对抽象化事物的进一步具体化的产物。
* 脱耦：脱耦就是将抽象化与实现化之间的耦合解脱开，或者说是将它们之间的强关联该换为弱关联，将两个角色之间的继承关系改为关联关系。桥接模式中所说的脱耦，就是指在一个软件系统的抽象化和实现化之间使用关联关系（组合或者聚合关系）而不是继承关系，从而使两者可以相对独立的变化，这就是桥接模式的用意。 

## 优缺点
### 优点
* 分离抽象接口及其实现部分
* 桥接模式有时类似于多继承方案，但是多继承方案违背了类的单一职责原则，复用性比较差，而且多继承结构中类的个数非常庞大
* 桥接模式提高了系统的可扩充性，在两个变化维度中任意扩展一个维度，都不需要修改原有系统
* 实现细节对客户透明，可以对客户隐藏实现细节

### 缺点
* 桥接模式的引入会增加系统的理解与设计难度，由于聚合关联关系建立在抽象层，要求开发者针对抽象进行设计与编程
* 桥接模式要求正确识别出系统中两个独立变化的维度，因此其使用范围具有一定的局限性

## 适用场景
* 系统需要在构建的抽象化角色和具体化角色之间增加更多的灵活性，避免在两个层次之间建立静态的继承关系，通过桥接模式可以使它们在抽象层建立一个关联关系
* 一个类存在两个独立变化的维度，且这两个维度都需要进行扩展

## 模式应用
### Java虚拟机
![Java虚拟机](/images/design-patterns/Java虚拟机.png)

### JDBC驱动
使用JDBC驱动程序的应用系统就是抽象角色，而所使用的数据库是实现角色。一个JDBC驱动程序可以动态地将一个特定类型的数据库与一个Java应用程序绑在一起，从而实现抽象角色与实现角色的动态耦合。